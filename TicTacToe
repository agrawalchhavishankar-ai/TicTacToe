#include <stdio.h>

char board[3][3];
int choice;
int player = 1;

// Reset the board
void resetBoard()
{
    char num = '1';
    for(int i=0;i<3;i++)
    {
        for(int j=0;j<3;j++)
        {
            board[i][j] = num++;
        }
    }
    player = 1;
}

// Draw board
void drawBoard()
{
    printf("\n\nTIC TAC TOE\n\n");

    printf(" %c | %c | %c \n", board[0][0], board[0][1], board[0][2]);
    printf("---|---|---\n");
    printf(" %c | %c | %c \n", board[1][0], board[1][1], board[1][2]);
    printf("---|---|---\n");
    printf(" %c | %c | %c \n\n", board[2][0], board[2][1], board[2][2]);
}

// Check win
int checkWin()
{
    if(board[0][0]==board[0][1] && board[0][1]==board[0][2]) return 1;
    if(board[1][0]==board[1][1] && board[1][1]==board[1][2]) return 1;
    if(board[2][0]==board[2][1] && board[2][1]==board[2][2]) return 1;

    if(board[0][0]==board[1][0] && board[1][0]==board[2][0]) return 1;
    if(board[0][1]==board[1][1] && board[1][1]==board[2][1]) return 1;
    if(board[0][2]==board[1][2] && board[1][2]==board[2][2]) return 1;

    if(board[0][0]==board[1][1] && board[1][1]==board[2][2]) return 1;
    if(board[0][2]==board[1][1] && board[1][1]==board[2][0]) return 1;

    return 0;
}

// Check draw
int checkDraw()
{
    for(int i=0;i<3;i++)
    {
        for(int j=0;j<3;j++)
        {
            if(board[i][j] != 'X' && board[i][j] != 'O')
                return 0;
        }
    }
    return 1;
}

// Change turn
void changeTurn()
{
    player = (player == 1) ? 2 : 1;
}

// Mark board
int markBoard(int choice)
{
    char mark = (player == 1) ? 'X' : 'O';

    switch(choice)
    {
        case 1: if(board[0][0]=='1') board[0][0]=mark; else return 0; break;
        case 2: if(board[0][1]=='2') board[0][1]=mark; else return 0; break;
        case 3: if(board[0][2]=='3') board[0][2]=mark; else return 0; break;
        case 4: if(board[1][0]=='4') board[1][0]=mark; else return 0; break;
        case 5: if(board[1][1]=='5') board[1][1]=mark; else return 0; break;
        case 6: if(board[1][2]=='6') board[1][2]=mark; else return 0; break;
        case 7: if(board[2][0]=='7') board[2][0]=mark; else return 0; break;
        case 8: if(board[2][1]=='8') board[2][1]=mark; else return 0; break;
        case 9: if(board[2][2]=='9') board[2][2]=mark; else return 0; break;
        default: return 0;
    }

    return 1;
}

// MAIN
int main()
{
    char playAgain;

    do
    {
        resetBoard();
        int gameOver = 0;

        while (!gameOver)
        {
            drawBoard();
            printf("Player %d, enter a number (1-9): ", player);
            scanf("%d", &choice);

            if(!markBoard(choice))
            {
                printf("Invalid move! Try again...\n");
                continue;
            }

            if(checkWin())
            {
                drawBoard();
                printf("ðŸŽ‰ Player %d wins!\n", player);
                gameOver = 1;
            }
            else if(checkDraw())
            {
                drawBoard();
                printf("ðŸ¤ It's a DRAW!\n");
                gameOver = 1;
            }
            else
            {
                changeTurn();
            }
        }

        printf("\nDo you want to play again? (Y/N): ");
        scanf(" %c", &playAgain);

    } while(playAgain=='y' || playAgain=='Y');

    printf("\nThanks for playing!\n");
    return 0;
}
